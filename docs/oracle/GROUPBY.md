# GROUP BY절
    총 100개의 데이터가 존재하는 테이블에서 각각 20개의 데이터씩 A~E 그룹으로 나누었다고 가정하면
    집계함수를 이용하여 각 <b>그룹 별로 단 하나의 행</b>을 리턴할 수 있다.
    각 그룹별로 반환되는 단 하나의 행을 집계 결과라고 한다. 
    즉, 집계함수란 여러 행들의 그룹이 모여서 그룹당 단 하나의 결과 행을 반환하는 함수다.
    집계함수는 GROUP BY절에 기재한 컬럼을 기준으로 그룹으로 모인 상태에서 각 그룹의 집계를 계산할때 사용하며, 
    SELECT, HAVING, ORDER BY절에 사용할 수 있다.
* GROUP BY절은 FROM절 아래에 위치한다.
* GROUP BY절을 통해 소그룹별 기준 컬럼을 정한 후, SELECT절에서는 집계함수를 사용한다.
* 집계함수의 결과는 NULL값을 가진 행을 제외한다.(COUNT(*)제외)
* GROUP BY절에서는 ALIAS를 사용할 수 없다.
* WHERE절이 먼저 실행되기 때문에 WHERE절에는 집계함수가 올 수 없다. 
* WHERE절은 전체 데이터를 GROUP으로 나누기 전에 행들을 필터 처리한다. 
    * 즉, WHERE절에 의해 반환되는 행들을 대상으로 GROUP BY을 진행한다. 

# HAVING절
* WHERE절에서는 집계함수를 사용할 수 없다. 
* 집계된 결과집합을 기준으로 특정 조건을 주고 싶은 경우에 HAVING절을 사용한다. 
* 조건을 적용한다는 점에서 WHERE절과 비슷하지만, 이미 한 번 필터링 된 결과집합 행에 적용된다는 점에서 차이가 있다. 
* HAVING절에서는 GROUP BY절의 기준 항목이나 소그룹의 집계함수가 사용된다. 
* HAVING절이 존재한다면, GROUP BY절에 의해 그룹핑된 데이터 중 제한 조건을 만족하는 행만 출력한다.
* 위치는 보통 GROUP BY절 뒤에 위치하지만 먼저 나와도 결과는 동일하다.

### 대표적인 집계함수 
* ALL : DEFAULT 옵션으로 생략이 가능하며, SELECT 절 안에 아무것도 기재 하지 않으면 자동으로 설정된다. 
* DISTINCT : SELECT절의 결과 집합에서 유일한 행만 출력한다. (중복제거)
* COUNT(*) : <b>NULL값을 포함</b>한 행의 수를 출력한다. 
* COUNT(표현식) : NULL을 제외한 표현식의 값의 행의 수를 출력한다.
* SUM(표현식) : NULL을 제외한 표현식의 값의 합계를 출력한다.
* AVG(표현식) : NULL을 제외한 표현식의 값의 평균을 출력한다.
* MAX(표현식) : NULL을 제외한 표현식의 값의 최대값을 출력한다.
* MIN(표현식) : NULL을 제외한 표현식의 값의 최소값을 출력한다.
* STDDEV(표현식) : NULL을 제외한 표현식의 값의 표준편차를 출력한다.
* VARIAN(표현식) : NULL을 제외한 표현식의 값의 분산을 출력한다.

### 사용 예시 
```sql
SELECT 
	COUNT(*) AS "전체 상가수",
	MAX(LO) AS "최대경도",
	MIN(LO) AS "최소경도",
	MAX(LA) AS "최대위도",
	MIN(LA) AS "최소위도"
FROM TB_BSSH tb ;
```

    간혹 조회의 결과가 1건도 나오지 않은 공집합이 리턴되는 경우가 존재한다. 
    이러한 경우 MAX함수를 사용해보자. MAX함수는 값이 없더라도 반드시 행을 리턴하며, 리턴하는 값은 NULL이다. 
    NVL(MAX())함수를 중첩해서 사용하여 데이터가 나오지 않더라도 우리가 원하는 방향으로 조회할 수 있다.
```sql
SELECT 
	NVL(MAX(A.SUBWAY_STATN_NO), '지하철역없음') AS SUBWAY_NO,
	NVL(MAX(A.LN_NM), '노선명없음') AS LN_NM,
	NVL(MAX(A.STATN_NM), '역명없음') AS STATN_NM
FROM TB_SUBWAY_STATN A
WHERE A.STATN_NM = '평양역';
```
