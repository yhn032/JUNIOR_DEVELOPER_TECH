## TCL - Transaction Control Language
    DML SQL 명령문을 처리하면 처리 결과가 바로 DB에 반영되는 것이 아니라 잠시 대기를 하게 되는데,
    이후에 커밋 명령이 들어오면 처리 결과가 DB에 반영되고, 롤백 명령이 들어오면 처리 결과가 취소된다.

# 트랜잭션의 특성 (ACID)
    트랜잭션은 DB의 논리적 연산 단위로 1개의 트랜잭션에는 1개 이상의 SQL문이 포함된다.
    트랜잭션은 분할할 수 없는 최소 단위이기 때문에 전부 적용시키거나 전부 취소하는 ALL OR NOTHING의 개념이다.
    
    예를 들어, 온라인에서 쇼핑몰에서 상품을 구매한다고 해보자. 
    이용자는 브랜드, 상품 종류, 세부 옵션을 모두 선택하고 최종 결제까지 마쳐야만 상품 구매가 완료된다. 
    즉, 브랜드 선택부터 최종 결제까지가 하나의 트랜잭션인 것이다.
    최종 결제까지 하던지(ALL) 브랜드까지만 선택하고 취소하면 이전에 작업한 내용이 모두 취소되어야 한다.(NOTHING)
* Atomicity (원자성)
  * 트랜잭션에서 정의된 연산들은 모두 성공적으로 끝나거나 모두 실패해야 한다.
* Consistency (일관성)
  * 트랜잭션의 실행 전, DB의 내용에 문제가 없다면, 실행 후에도 문제가 없어야 한다. 
* Isolation (고립성)
  * 하나의 트랜잭션이 실행되고 있을때는 다른 트랜잭션의 영향을 받아 잘못된 결과를 만들어서는 안 된다.
* Durability (지속성)
  * 트랜잭션이 성공적으로 수행되면 그 트랜잭션이 갱신한 DB의 데이터는 영구적으로 저장된다.

### COMMIT, ROLLBACK
COMMIT OR ROLLBACK 이전의 상태 
* 최종 적용된 데이터가 아니고 메모리에만 적용된 상태이므로 변경 이전 상태로 복구가 가능
* 입력/수정/삭제를 실행한 사용자는 SELECT문으로 처리 결과를 확인할 수 있다.
* 입력/수정/삭제를 실행한 사용자 이외의 다른 사용자는 SELECT문으로 처리 결과를 확인할 수 없다.
* 사용자 1이 입력/수정/삭제한 행은 트랜잭션이 수행되기 전에는 LOCKING상태이므로 사용자2가 이 행을 변경할 수 없다.

COMMIT 이후의 상태 
* SQL 처리결과가 DB에 완전히 반영된다. 
* 이전의 데이터는 영원히 삭제된다. 
* 모든 사용자가 변경 데이터를 조회할 수 있다. 
* 관련된 행에 대한 락이 해제된다. 

SAVEPOINT 
* 롤백시 트랜잭션에 포함된 모든 입력/수정/삭제를 취소하는 것이 아니라 현 시점에서 SAVEPOINT지점까지의 데이터 변경만 취소할 수 있다. 
* 쉽게 말해, 트랜잭션의 규모가 거대한 경우 SQL처리 결과에 문제가 발견되었을 때, 모든 결과를 취소할 수 없기 때문에 
* 특정 지점을 지정하고, 에러가 발생한 지점 근처의 포인트까지 롤백하기 위함이다. 


# 트랜잭션의 요점
* 테이블 내에서 데이터의 변경을 발생시키는 입력/수정/삭제 수행 시 변경되는 데이터의 무결성을 보장하는 것이 목적이다. 
* 커밋 : "변경된 데이터를 테이블에 영구적으로 반영하라"는 뜻이다. 
* 롤백 : "변경전으로 복구하라"는 뜻이다. 
* SAVEPOINT는 "데이터 변경 사항의 취소를 지정한 지점까지만 취소하라"는 뜻이다. 
* 오라클 DBMS의 트랜잭션은 트랜잭션의 대상이 되는 SQL문을 실행하면 자동으로 시작되고, 커밋 또는 롤백을 실행한 시점에서 종료된다.


주의 사항 
커밋/롤백 과는 상관없이 트랜잭션 적용 처리가 일어나는 상황 
1. 오라클 DBMS를 기준으로 CREATE, ALTER DROP, RENAME, TRUNCATE TABLE 등 DDL문장을 실행하면, 실행 전과 후 시점에 자동으로 커밋된다. 

예를 들어, UPDATE문을 수행했지만 결과가 마음에 들지 않아서 ROLLBACK를 할 예정이었다고 가정해보자. 
ROLLBACK을 하기 전에 CREATE문을 실행하게 되면, DDL을 실행하기 전 변경사항(UPDATE)은 자동으로 커밋된다. 
롤백하려던 내용을 커밋하게 된 꼴이니 주의해야 한다.

2. DB에 대한 접속을 종료하면 이전 DML의 변경사항이 자동 커밋된다. 
3. 어플리케이션의 이상 동작으로 이한 DBMS에 대한 접속이 단절되었을 때는 데이터의 변경사항이 자동으로 롤백된다.
